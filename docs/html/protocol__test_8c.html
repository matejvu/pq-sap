<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: tests/protocol_test.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_59425e443f801f1f2fd8bbe4959a3ccf.html">tests</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">protocol_test.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="protocol__api_8h_source.html">protocol_api.h</a>&quot;</code><br />
<code>#include &quot;stdio.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for protocol_test.c:</div>
<div class="dyncontent">
<div class="center"><img src="protocol__test_8c__incl.png" border="0" usemap="#atests_2protocol__test_8c" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae66f6b31b5ad750f1fe042a706a4e3d4" id="r_ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="protocol__test_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="memdesc:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function that runs the SAP Protocol test.  <br /></td></tr>
<tr class="separator:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae66f6b31b5ad750f1fe042a706a4e3d4" name="ae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66f6b31b5ad750f1fe042a706a4e3d4">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function that runs the SAP Protocol test. </p>
<p>This function simulates the key exchange and stealth address generation process within the SAP protocol. It includes key pair generation, computation of the shared secret and view tag by the sender, and stealth address generation by both the sender and recipient. The test is passed if the stealth addresses generated by the sender and recipient match.</p>
<dl class="section return"><dt>Returns</dt><dd>0 if the test passes, indicating successful execution; otherwise, returns early on failure. </dd></dl>
<p>Local variables:</p>
<ul>
<li>k_pub[<a class="el" href="params_8h.html#a7663b32715a32f12eb70420793753ce3" title="The number of bytes used for the public key in the Kyber scheme.">KYBER_PUBLICKEYBYTES</a>]: Public key for key exchange</li>
</ul>
<ul>
<li>v_pub[<a class="el" href="params_8h.html#a7663b32715a32f12eb70420793753ce3" title="The number of bytes used for the public key in the Kyber scheme.">KYBER_PUBLICKEYBYTES</a>]: Public key for the view address</li>
</ul>
<ul>
<li>k_priv[<a class="el" href="params_8h.html#a7f9a2f9ae6937442f988816af97babb3" title="The number of bytes used for the secret key in the Kyber scheme.">KYBER_SECRETKEYBYTES</a>]: Secret key for key exchange</li>
</ul>
<ul>
<li>v_priv[<a class="el" href="params_8h.html#a7f9a2f9ae6937442f988816af97babb3" title="The number of bytes used for the secret key in the Kyber scheme.">KYBER_SECRETKEYBYTES</a>]: Secret key for the view address</li>
</ul>
<ul>
<li>ephemeral_pub_key[<a class="el" href="protocol__api_8h.html#a84c301f8e1f57a825bbd2dcab697fc5e" title="Number of bytes in a ciphertext.">CIPHERTEXT_BYTES</a>]: Ephemeral public key used in the protocol</li>
</ul>
<ul>
<li>view_tag: View tag computed by the sender, used for generating the stealth address</li>
</ul>
<ul>
<li>stealth_pub_key_sender[<a class="el" href="protocol_8c.html#ac42ee8dc097e52d63dd4e8371d769d12">STEALTH_ADDRESS_BYTES</a>]: Stealth public key generated by the sender</li>
</ul>
<ul>
<li>stealth_pub_key_reciever[<a class="el" href="protocol_8c.html#ac42ee8dc097e52d63dd4e8371d769d12">STEALTH_ADDRESS_BYTES</a>]: Stealth public key generated by the recipient</li>
</ul>
<ul>
<li>ss[<a class="el" href="params_8h.html#a5054c9269277412d8536eb82cfffbe15" title="The size in bytes of the shared key in the Kyber algorithm.">KYBER_SSBYTES</a>]: Shared secret from the sender's computation (sender's shared secret)</li>
</ul>
<ul>
<li>ss2[<a class="el" href="params_8h.html#a5054c9269277412d8536eb82cfffbe15" title="The size in bytes of the shared key in the Kyber algorithm.">KYBER_SSBYTES</a>]: Shared secret from the recipient's computation (recipient's shared secret)</li>
</ul>
<p>SAP Protocol:</p><ol type="1">
<li>Generate key pair for both the sender and recipient. The sender generates a public/private key pair calling <a class="el" href="kem_8h.html#affcceebbb34b0fcdd82918c9dd6f80ef" title="Generates a public and secret key for Kyber KEM.">crypto_kem_keypair(k_pub, k_priv)</a>, and the recipient generates their own keys calling <a class="el" href="kem_8h.html#affcceebbb34b0fcdd82918c9dd6f80ef" title="Generates a public and secret key for Kyber KEM.">crypto_kem_keypair(v_pub, v_priv)</a></li>
</ol>
<ol type="1">
<li>Sender computes the shared secret and view tag using the public keys( sender_computes_stealth_pub_key_and_viewtag() )</li>
</ol>
<ol type="1">
<li>Recipient computes the stealth public key based on the sender's ephemeral public key. The recipient calculates their own stealth address based on their private key, the sender's public key, and the sender's ephemeral public key. Calling <a class="el" href="protocol_8c.html#a858f8d44b117050df006c629482959fc" title="Workflow:">recipient_computes_stealth_pub_key()</a></li>
</ol>
<ol type="1">
<li>Verify that the stealth public keys generated by the sender and recipient match. The final step of the protocol is to compare the stealth public key computed by the sender and recipient. If they match, the test passes, indicating that the protocol works correctly. Test fails if the computed stealth public keys do not match</li>
</ol>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
